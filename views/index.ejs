<!DOCTYPE html>
<html lang="en">
	<!-- Header -->
	<%- include('partials/header') %>
	
    <body id="page-top">
        <!-- Navigation-->
		<%- include('partials/nav') %>

        <!-- Header-->
        <header class="bg-primary-nfl bg-gradient text-white">
            <div class="container px-4 text-center">
                <h1 class="fw-bolder"> Fantasy Statbook </h1>
                <p class="lead">Visualization of Fantasy Football Stats</p>
            </div>
        </header>

        <!-- Test Section -->
        <section id="about">
            <div class="container px-4">
                <div class="row gx-4 justify-content-center">
                    <div class="col-lg-8">
                        <h2>Test Section</h2>
                        <div id="container" style="width: 800px; height: 400px;"></div>
                        <script>
                            var playerData = JSON.parse('<%- JSON.stringify(playerData) %>');
                            if(playerData){
                                console.log(playerData[0]);
                                anychart.onDocumentReady(function() {
                                    var p1;
                                    for (var i=0; i < playerData.length ; i++)
                                    {
                                        if (playerData[i].player == 'Player 2') {
                                            p1 = playerData[i];
                                            break;
                                        }
                                    }
                                    var p2 = playerData[2];
                                    // create data
                                    var data = anychart.data.set([
                                        ["Games", p1.yr16, p2.yr16],
                                        ["Comp", p1.yr17, p2.yr17],
                                        ["Int", p1.yr18, p2.yr18],
                                        ["Yds", p1.yr19, p2.yr19],
                                        ["Tgt", p1.yr20, p2.yr20],
                                        ["Rec", p1.yr21, p2.yr21],
                                        ["Y/R", p1.yr21, p2.yr21],
                                        ["Fumbles", p1.yr21, p2.yr21]
                                    ]);

                                    // map the data
                                    var playerData1 = data.mapAs({x: 0, value: 1, fill: 3, stroke: 5, label: 6});
                                    var playerData2 = data.mapAs({x: 0, value: 2, fill: 4, stroke: 5, label: 6});

                                    // create a chart
                                    chart = anychart.column();

                                    // create series and set the data
                                    var series1 = chart.column(playerData1);
                                    var series2 = chart.column(playerData2);

                                    chart.barGroupsPadding(1);

                                    // Set width bound
                                    chart.width('100%');

                                    // Rename the series to player names
                                    chart.getSeriesAt(0).name(p1.player);
                                    chart.getSeriesAt(1).name(p2.player);

                                    chart.tooltip().format("{%seriesName}: {%value}")

                                    // set the container id
                                    chart.container("container");

                                    // initiate drawing the chart
                                    chart.draw();
                                });
                            }
                        </script>
                        <!-- Row for buttons and stuff -->
                        <!--
                        <div class="row">
                            <div class="col">
                                <div class="dropdown">
                                    <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                      Year
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                      <li><a class="dropdown-item">Action</a></li>
                                      <li><a class="dropdown-item">Another action</a></li>
                                      <li><a class="dropdown-item">Something else here</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <label>Year: <input list="browsers" name="myBrowser" /></label>
                        <datalist id="browsers">
                            <option value="Chrome">
                            <option value="Firefox">
                            <option value="Internet Explorer">
                            <option value="Opera">
                            <option value="Safari">
                            <option value="Microsoft Edge">
                        </datalist> 
                        -->
                    </div>
                </div>
                <form>
                    <label for="years">Choose Year: </label>
                    <select id="years" name="years">
                        <option>2018</option>
                        <option>2019</option>
                    </select>
                    <input type="submit">
                </form>
            </div>
        </section>

        <!-- Position Section -->
        <section id="about">
            <div class="container px-4">
                <div class="row gx-4 justify-content-center">
                    <div class="col-lg-8">
                        <h2>Position Data</h2>
                        <div id="container" style="width: 800px; height: 400px;"></div>
                        <script>
                            anychart.onDocumentReady(function () {
                              // The data used in this sample can be obtained from the CDN
                              // https://cdn.anychart.com/samples/marker-and-bubble-charts/multi-series-bubble-chart/data.json
                              anychart.data.loadJsonFile(
                                'https://cdn.anychart.com/samples/marker-and-bubble-charts/multi-series-bubble-chart/data.json',
                                function (data) {
                                  var bestSportsmenTrainingData = anychart.data.set(data);
                                  var mapTrainingData = bestSportsmenTrainingData.mapAs({x: 1, value: 2, size: 4, training: 0, data: 3});
                        
                                  var sportsmen1 = mapTrainingData.filter('training', trainingFilter(1) );
                                  var sportsmen2 = mapTrainingData.filter('training', trainingFilter(2) );
                                  var sportsmen3 = mapTrainingData.filter('training', trainingFilter(3) );
                                  var sportsmen4 = mapTrainingData.filter('training', trainingFilter(4) );
                        
                                  // create scatter chart
                                  var chart = anychart.scatter();
                        
                                  // turn on chart animation
                                  chart.animation(true);
                        
                                  // set chart margin settings
                                  chart.padding(20, 20, 10, 20);
                        
                                  // grid settings
                                  chart.yGrid(true).xGrid(true).xMinorGrid(true).yMinorGrid(true);
                        
                                  // bubble size settings
                                  chart.minBubbleSize(5).maxBubbleSize(40);
                        
                                  // set chart axes settings
                                  chart
                                    .xAxis()
                                    .title('Average pulse during training')
                                    .minorTicks(true);
                                  chart.yAxis().title('Average power').minorTicks(true);
                        
                                  // create first series with mapped data
                                  chart.bubble(sportsmen1).name('Christopher Sanchez');
                                  // create second series with mapped data
                                  chart.bubble(sportsmen2).name('Judy Evans');
                                  // create third series with mapped data
                                  chart.bubble(sportsmen3).name('Walter Burke');
                                  // create forth series with mapped data
                                  chart.bubble(sportsmen4).name('Daniel Williamson');
                        
                                  chart
                                    .tooltip()
                                    .useHtml(true)
                                    .fontColor('#fff')
                                    .format(function () {
                                      return (
                                        this.getData('data') +
                                        '<br/>' +
                                        'Power: <span style="color: #d2d2d2; font-size: 12px">' +
                                        this.getData('value') +
                                        '</span></strong><br/>' +
                                        'Pulse: <span style="color: #d2d2d2; font-size: 12px">' +
                                        this.getData('x') +
                                        '</span></strong><br/>' +
                                        'Duration: <span style="color: #d2d2d2; font-size: 12px">' +
                                        this.getData('size') +
                                        ' min.</span></strong>'
                                      );
                                    });
                        
                                  // set container id for the chart
                                  chart.container('container');
                        
                                  // initiates chart drawing
                                  chart.draw();
                                }
                              );
                            });
                            /**
                             * Helper function to bind data field to the local var.
                             * @param val
                             * @return {Function}
                             */
                            function trainingFilter(val) {
                              return function (fieldVal) {
                                return fieldVal === val;
                              };
                            }
                          
                        </script>
                    </div>
                </div>
            </div>
        </section>

        <!-- About section-->
        <section id="about">
            <div class="container px-4">
                <div class="row gx-4 justify-content-center">
                    <div class="col-lg-8">
                        <h2>About this page</h2>
                        <p class="lead">This is a great place to talk about your webpage. This template is purposefully unstyled so you can use it as a boilerplate or starting point for you own landing page designs! This template features:</p>
                        <ul>
                            <li>Clickable nav links that smooth scroll to page sections</li>
                            <li>Responsive behavior when clicking nav links perfect for a one page website</li>
                            <li>Bootstrap's scrollspy feature which highlights which section of the page you're on in the navbar</li>
                            <li>Minimal custom CSS so you are free to explore your own unique design options</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Services section-->
        <section class="bg-light" id="services">
            <div class="container px-4">
                <div class="row gx-4 justify-content-center">
                    <div class="col-lg-8">
                        <h2>About this project:</h2>
                        <p class="lead">This project was made for Dr. Shipman's class at Texas A&M University about Data Visualization.</p>
                    </div>
                </div>
            </div>
        </section>
		
        <!-- Footer -->
        <%- include('partials/footer') %>

        <!-- Bootstrap core JS-->
        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script> -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

        <!-- Core theme JS-->
        <script src="/scripts/scripts.js"></script>
    </body>
</html>
